# Регулятор освещенности - решение задачи

В постановке задачи уже выдвигались требования к регулятору. После изучения задачи, теории по задаче, а также после изучения макета были сформулированы более "жесткие" требования к регулятору.

Эти требования можно описать в виде следующей диаграммы:

![Требования к регулятору](/img/act-photo-problem-diagram.png)

Итак, требуется реализовать:

1. Два канала входного каскада для ввода сигнала с фотодиода и сигнала опорного уровня
2. Выходной каскад для управления яркостью светодиода
3. Алгоритм управления
4. Периферийные интерфейсы

Будем рассматривать все по порядку.

1. Воплощение в виде печатной платы
    * На базе микроконтроллера `ATmega8A`
    * С входами и выходами для:
        - Питания $$+12V$$
        - Преобразователя напряжения $$+12V \rightarrow \pm5V$$
        - Фотодиода (провод с макета)
        - Светодиода (провод с макета)
        - `USART`/`RS-232` -- отладка и обработка команд
        - `SPI` -- программирование памяти
        - `I2C` (потребуется для следующей задачи)
    * С защитой от переполюсовки питания
    * С кнопкой `RESET` для сброса микроконтроллера
    * С фильтро-усилительным входным каскадом, обеспечивающим:
        - Преобразование фототока фотодиода в напряжение
        - Фильтрацию сигнала с фотодиода -- отсечение частот, больших или равных 50Гц (наводки сети)
        - Усиление сигнала для заведения его на АЦП с диапазоном оцифровки 0..2.56В.
    * С входным каскадом установки опорного уровня освещенности, которую и необходимо поддерживать, обеспечивающим заведение сигнала опорного уровня на АЦП
2. 